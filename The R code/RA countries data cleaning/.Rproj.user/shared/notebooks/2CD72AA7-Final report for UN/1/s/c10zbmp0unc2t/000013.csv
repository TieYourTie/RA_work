"0","library(plotly)"
"0",""
"0","# 模型"
"0","un_qd_control_model <- lm(y_QD ~ x1_QD + x2_QD_control)"
"0",""
"0","# 实际数据"
"0","x1 <- x1_QD"
"0","x2 <- x2_QD_control"
"0","y <- y_QD"
"0",""
"0","# 创建回归线所需的数据点"
"0","x1_range <- seq(min(x1), max(x1), length.out = 50)"
"0","x2_range <- seq(min(x2), max(x2), length.out = 50)"
"0",""
"0","# 生成网格并计算对应的预测值"
"0","grid <- expand.grid(x1_QD = x1_range, x2_QD_control = x2_range)"
"0","grid$predicted <- predict(un_qd_control_model, newdata = grid)"
"0",""
"0","# 创建 3D 图"
"0","plot_ly() %>%"
"0","  # 添加实际数据点"
"0","  add_markers("
"0","    x = ~x1, y = ~x2, z = ~y,"
"0","    marker = list(size = 4),  # 调整点的大小"
"0","    name = ""实际数据"""
"0","  ) %>%"
"0","  # 添加回归线"
"0","  add_lines("
"0","    x = ~grid$x1_QD,"
"0","    y = ~grid$x2_QD_control,"
"0","    z = ~grid$predicted,"
"0","    line = list(color = ""red"", width = 3),  # 设置线的颜色和宽度"
"0","    name = ""回归线"""
"0","  ) %>%"
"0","  # 调整布局"
"0","  layout("
"0","    scene = list("
"0","      xaxis = list(title = ""x1_QD (Average Inflation)""),"
"0","      yaxis = list(title = ""x2_QD_control (Interaction)""),"
"0","      zaxis = list(title = ""y_QD (Persistence Effect)""),"
"0","      aspectmode = ""cube""  # 确保坐标轴比例一致"
"0","    )"
"0","  )"
